
## 后端架构

后端引擎和AI Agent引擎在同一个服务器中，通过互相写自己的数据库，读对方的数据库进行通信

我们使用SQLite作为我们的数据库

- **关卡生成引擎**：
    1. **关卡设计规则库**：
		- 单个题目包括以下元素：{题目ID，题干，题目内容，答案，分数}
	    - 单个关卡包括以下元素：{元数据: {关卡ID，学科类别，所属论文，论文作者，论文发布时间（年/月），论文引用量，题目顺序，通关条件}，内容: {题目数量，题目数组}}
	    - 上述由 @任佳麟 负责，直接将这些元数据和关卡内容输出在SQLite里，输出给后端
    2. **关卡拼装模块**：
	    - 学科路线图包括以下元素：{学科ID，关卡ID}，路线图将关卡以树的方式排序 
	    - 根据题目特性和难度，调用规则库生成各个学科的“路线图”。
    3. **内容渲染层**：将“关卡蓝图”转成前端可渲染的 JSON/Schema（关卡素材 URL、文字描述、交互脚本）。
- **用户进度管理**：
    - 用户档案与认证（JWT）
    - 关卡解锁与进度存储（哪篇论文、哪道题、当前答题状态、得分、星级）
    - 重做/复习记录
- **统计与分析**：
    - 用户答题行为数据埋点（时长、正确率、放弃率）
	    - 时长大概要前端传给我，正确率/放弃率由后端统计即可
    - 生成学习报告、推荐可重点进行复习的点
- **成就系统**：
	- 用户用户答题到一定关卡，或者学习时长到一定时间，或者满足其他的什么条件，会额外发送一个成就属性
		- 触发事件 (Events):
			- 用户做了什么：完成某个关卡、累计学习时长、分享内容等。
		- 成就定义 (Achievements): 
			- 每个成就的唯一 ID、名称、描述、级别、图标（前端）、NFT；
			- 可能有多级（铜→银→金）或可进阶的“勋章树”。
			- NFT的对应机制
		- 评估引擎 (Evaluation Engine):
			- 实时扫描用户事件日志，匹配规则；
			- 一旦规则达成，持久化写入用户成就记录，并向前端发放通知（可能是随着事件信息一起发放，加一个字段；也有可能是单独发放）；
