# 🎓 PaperPlay - 论文游戏化学习平台

[![Go](https://img.shields.io/badge/Go-1.21+-blue.svg)](https://go.dev)
[![Vue](https://img.shields.io/badge/Vue-2.x-green.svg)](https://vuejs.org)
[![Python](https://img.shields.io/badge/Python-3.10+-orange.svg)](https://python.org)
[![Solidity](https://img.shields.io/badge/Solidity-0.8.28-yellow.svg)](https://soliditylang.org)

PaperPlay 是一个创新的论文游戏化学习平台，通过AI技术和Web3集成，将复杂的学术论文转化为易于理解的概念和互动式学习体验。

## 🌟 系统架构

项目采用模块化设计，包含四个核心组件，每个组件都经过精心设计以实现高内聚和低耦合。

### 1. 🖥️ 前端 (Vue + uni-app)

*构建一个响应式、跨平台的学习界面，注重用户体验和互动性。*

- **技术栈**:
  - **Vue 2 + uni-app**: 采用成熟的 uni-app 框架，实现一套代码多端发布，覆盖Web、小程序和App。
  - **SCSS**: 用于编写可维护、可复用的全局样式和组件样式。
  - **JWT 认证**: 通过在本地安全存储 Token，实现持久化登录和无缝的 API 请求认证。
  - **WebSocket 通信**: 用于接收后端推送的实时通知，如新成就达成、系统消息等。
- **核心功能**:
  - **认证系统**: 管理用户登录、注册流程，并利用 `refresh_token` 机制实现令牌的自动续期，保证用户体验的连续性。
  - **学习地图**: 以可视化的方式展示学科知识结构，用户可以直观地看到自己的学习路径和进度。
  - **每日任务**: 根据用户的学习历史和偏好，动态推荐相关的论文或测验，引导用户进行持续学习。
  - **测验系统**: 提供互动式答题体验，支持多种题型，并能即时给出评分反馈和答案解析。
  - **个人中心**: 集中展示用户的学习统计数据、已获得的成就徽章和个人信息设置。

### 2. ⚡ 后端 (Golang)

*提供稳定、高效的 API 服务，并处理所有核心业务逻辑。*

- **核心框架**:
  - **Gin Web 框架**: 一个高性能的 HTTP 框架，用于构建 RESTful API。
  - **GORM ORM 框架**: 简化了数据库操作，实现了模型与数据库表的自动映射和迁移。
  - **SQLite3**: 轻量级的嵌入式数据库，方便开发和部署，无需独立的服务进程。
- **系统服务**:
  - **API 服务**: 设计了一套完整的 RESTful 接口，并利用中间件处理日志、跨域(CORS)、认证和错误恢复。
  - **认证服务**: 实现了基于 JWT 的无状态认证体系，包括令牌的签发、验证和刷新。
  - **WebSocket 服务**: 采用中心化 Hub 架构，管理所有客户端连接，并能向特定用户或所有用户广播消息。
  - **监控服务**: 集成 Prometheus，通过 `/metrics` 端点暴露关键性能指标；提供 `/health` 端点用于检查数据库等核心服务的健康状况。
- **业务模块**:
  - **用户系统**: 负责用户注册、登录、个人资料更新和学习进度的持久化存储。
  - **学习系统**: 管理学科、论文、关卡和题目等核心数据，并处理关卡挑战、答案提交等学习逻辑。
  - **成就系统**: 内置一个规则引擎，根据用户行为（如完成关卡、连续登录）实时评估并授予相应成就。
  - **定时任务**: 使用 Cron-like 调度器，定期执行数据汇总、生成周报、触发系统事件等后台任务。

### 3. 🤖 Agent系统 (Python)

*利用大语言模型（LLM）实现论文内容的自动化解析和游戏化内容生成。*

- **Agent组件**:
  - **总控 Agent**: 作为任务编排的核心，协调论文处理、概念提取和问题生成三大 Agent 的工作流程。
  - **论文处理 Agent**: 负责从 PDF 文件中智能提取结构化文本和元数据，并利用向量化技术进行语义存储。
  - **概念抽取 Agent**: 调用 LLM 分析论文内容，自动识别核心学术概念，并对其重要性进行评分。
  - **问题生成 Agent**: 独创“类比引入+概念深化”的双层问题模式，将抽象知识转化为易于理解的题目。

### 4. 🔗 Web3集成 (Solidity)

*将学习成就与区块链技术结合，提供可验证、可拥有的数字徽章。*

- **技术架构**:
  - **Injective EVM**: 选择在 Injective 兼容 EVM 的链上部署，兼顾性能和以太坊生态的兼容性。
  - **ERC721 标准**: 基于该标准创建独一无二的 NFT 成就徽章，确保每个徽章的唯一性。
  - **Hardhat 框架**: 用于智能合约的编译、测试和部署，提供了一整套完善的开发工具链。
- **合约功能**:
  - **NFT 成就**: 支持铸造青铜、白银、黄金、钻石等多等级的成就徽章，并支持批量操作以提高效率。
  - **权限控制**: 通过 `onlyOwner` 等修饰符严格控制合约的管理权限，确保只有授权地址才能执行铸造等敏感操作。
  - **数据统计**: 在链上记录并提供查询接口，方便统计各等级成就的总量和特定用户的持有情况。

## 🚀 快速开始

### 环境要求
- Go 1.21+
- Node.js 16+
- Python 3.10+
- SQLite3
- MetaMask浏览器扩展

### 后端启动
```bash
cd backend
go mod download
go run cmd/main.go
```

### 前端启动
```bash
# 使用HBuilderX（推荐）
# 点击"运行"按钮或使用Ctrl+R

# 或使用CLI
npm run dev:%PLATFORM%     # 开发服务器
npm run build:%PLATFORM%   # 生产构建

# %PLATFORM%可选值：
# - h5            # Web版本
# - mp-weixin     # 微信小程序
# - app-plus      # App
# - mp-alipay     # 支付宝小程序
```

### Agent系统启动
```bash
cd agent
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt

# 配置环境变量
export DASHSCOPE_API_KEY=your_api_key

# 启动服务
python main.py
```

### Web3部署
```bash
cd injective/hardhat-inj
npm install
npx hardhat compile
npx hardhat run script/deployAchievement.js --network inj_testnet
```

## 📊 系统功能

### 学习功能
- **论文学习**: 用户可以选择一篇论文进行游戏化学习，系统会将其分解为多个小关卡，并通过智能解析突出核心概念。
- **可视化学习**: 提供交互式的知识地图，将学科内的知识点连接成网状结构，帮助用户构建完整的知识体系。
- **互动测验**: 在每个学习关卡后都设有测验环节，通过多种题型检验用户的学习效果，并提供即时反馈。
- **学习追踪**: 系统会详细记录用户的学习进度、答题正确率和所获成就，方便用户回顾和自我评估。

### 成就系统
- **等级体系**: 设计了从青铜到钻石的四级成就体系，每个成就都有明确的解锁条件和进度追踪。
- **NFT奖励**: 将高级成就铸造成链上 NFT 徽章，为用户的学习成果提供可验证、可收藏的数字凭证。
- **激励机制**: 通过完成每日任务、达成学习里程碑等方式获得成就和奖励，有效提升用户的学习动力。

### AI辅助
- **智能解析**: Agent 系统能够自动处理上传的 PDF 论文，提取关键元数据和核心概念，并评估其重要性。
- **内容生成**: AI 根据论文概念自动生成类比式问题、答案解释和相关的学习建议，丰富学习内容。
- **个性化**: 未来将根据用户的答题情况和学习偏好，动态调整学习内容的难度和推荐路径。

### Web3特性
- **资产管理**: 用户可以在个人中心查看和管理自己获得的 NFT 成就徽章，并能在支持 Injective 的钱包和市场中流转。
- **权限控制**: 智能合约确保了成就徽章的发行规则公开透明，且只有管理员可以铸造，防止滥发。
- **数据统计**: 所有成就的颁发记录都在链上可查，提供了公开、可信的数据统计和验证方式。

## 🔧 项目结构

```
paperplay/
├── backend/           # Golang后端，负责核心业务逻辑和API
│   ├── cmd/           # 主程序入口
│   │   └── main.go    # 初始化服务、配置路由和启动服务器
│   ├── config/        # 配置文件
│   │   ├── config.go  # 加载和解析YAML配置
│   │   └── config.yaml# 定义数据库、服务器等环境变量
│   ├── internal/      # 项目内部核心代码，遵循Go项目布局标准
│   │   ├── api/       # HTTP请求处理器，负责解析请求和返回响应
│   │   ├── model/     # GORM数据模型，定义数据库表结构
│   │   ├── service/   # 业务逻辑层，处理复杂的业务规则
│   │   └── middleware/# Gin中间件，如JWT认证、日志记录等
│   └── pkg/           # 可被外部引用的公共库（当前较少使用）
├── frontend/          # Vue前端，基于uni-app实现跨平台用户界面
│   ├── api/           # 封装对后端API的请求
│   ├── pages/         # 各个页面视图组件
│   │   ├── index/     # 登录与注册页面
│   │   ├── map/       # 学习地图页面
│   │   ├── daily/     # 每日任务与推荐页面
│   │   ├── quiz/      # 答题测验页面
│   │   └── profile/   # 个人中心页面
│   ├── static/        # 存放图片、字体等静态资源
│   └── utils/         # 通用工具函数，如HTTP请求封装
├── agent/             # Python AI Agent系统，处理论文解析和内容生成
│   ├── agents/        # 核心Agent定义
│   │   ├── paper_processing.py  # 论文处理Agent实现
│   │   ├── concept_extraction.py# 概念提取Agent实现
│   │   └── question_generation.py# 问题生成Agent实现
│   ├── utils/         # Agent使用的工具模块，如数据库、PDF下载器
│   └── applications/  # 可独立运行的脚本，用于批量处理任务
└── injective/         # Web3集成，包含NFT智能合约和相关工具
    ├── hardhat-inj/   # Hardhat项目，用于合约开发和部署
    │   ├── contracts/ # Solidity智能合约源文件
    │   └── scripts/   # 合约部署和交互脚本
    ├── frontend/      # 一个独立的简易前端，用于测试合约交互
    └── metadata/      # NFT成就徽章的元数据JSON文件
```

## 📈 性能指标

| 模块            | 指标         | 表现     |
| --------------- | ------------ | -------- |
| **后端**  | API响应时间  | <100ms   |
| **前端**  | 页面加载时间 | <2s      |
| **Agent** | PDF处理速度  | ~30秒/篇 |
| **Web3**  | 交易确认     | <5个区块 |

## 🔮 未来规划

### 短期目标 (1-3个月)
- [ ] 优化用户界面体验
- [ ] 增加更多问题类型
- [ ] 完善概念关联图谱
- [ ] 提升AI处理效率

### 中期目标 (3-6个月)
- [ ] 实现用户个性化推荐
- [ ] 添加多模态支持
- [ ] 扩展Web3功能
- [ ] 优化激励机制

### 长期目标 (6-12个月)
- [ ] 多语言支持
- [ ] 实时协作学习
- [ ] 知识图谱可视化
- [ ] 生态系统扩展

## 👥 贡献指南

欢迎贡献代码！请参考各子目录中的具体贡献指南。

## 🙏 致谢

感谢以下开源项目和技术：
- [LangChain](https://langchain.com)
- [Vue](https://vuejs.org)
- [Gin](https://gin-gonic.com)
- [uni-app](https://uniapp.dcloud.io)
- [OpenZeppelin](https://openzeppelin.com)
- [Injective Protocol](https://injective.com)

---

<div align="center">

**🎓 让学术论文学习变得简单有趣！**

</div>
